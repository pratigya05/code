#include <iostream>
using namespace std;

// Node for Doubly Linked List
class Node {
public:
    int bit;
    Node* prev;
    Node* next;

    Node(int b) {
        bit = b;
        prev = next = NULL;
    }
};

// Binary Number class using DLL
class BinaryDLL {
public:
    Node* head;
    Node* tail;

    BinaryDLL() {
        head = tail = NULL;
    }

    // Insert each bit at the end
    void insertBit(int b) {
        Node* newNode = new Node(b);

        if (!head) {
            head = tail = newNode;
        } 
        else {
            tail->next = newNode;
            newNode->prev = tail;
            tail = newNode;
        }
    }

    // Display the binary number
    void display() {
        Node* temp = head;
        while (temp) {
            cout << temp->bit;
            temp = temp->next;
        }
        cout << endl;
    }

    // -------------------------------------------------------------
    // a) Calculate 1's Complement
    // -------------------------------------------------------------
    void onesComplement() {
        Node* temp = head;
        while (temp) {
            temp->bit = (temp->bit == 0 ? 1 : 0);
            temp = temp->next;
        }
    }

    // -------------------------------------------------------------
    // b) Calculate 2's Complement
    // -------------------------------------------------------------
    void twosComplement() {
        // Step 1: First compute 1's complement
        onesComplement();

        // Step 2: Add 1 starting from LAST bit (tail)
        Node* temp = tail;
        int carry = 1;

        while (temp && carry) {
            if (temp->bit == 0) {
                temp->bit = 1;
                carry = 0;
            }
            else {
                temp->bit = 0;
                temp = temp->prev;
            }
        }
    }
};


// --------------------------------------------------------------
// MAIN FUNCTION
// --------------------------------------------------------------

int main() {
    BinaryDLL bin;
    string binary;

    cout << "Enter a binary number: ";
    cin >> binary;

    // Store digits into DLL
    for (char c : binary)
        bin.insertBit(c - '0');

    cout << "\nOriginal Binary Number: ";
    bin.display();

    // 1's complement
    BinaryDLL ones = bin;  // make copy
    ones.onesComplement();
    cout << "1's Complement: ";
    ones.display();

    // 2's complement
    BinaryDLL twos = bin;  // make copy
    twos.twosComplement();
    cout << "2's Complement: ";
    twos.display();

    return 0;
}
